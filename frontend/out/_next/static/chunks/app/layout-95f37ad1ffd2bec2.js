(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},2865:(e,t,a)=>{"use strict";a.d(t,{TenantProvider:()=>n});var l=a(5155),o=a(2115);let s=(0,o.createContext)({subdomain:"",isTenant:!1,isMainDomain:!1,isAllowed:!0,checked:!1});function n(e){let{children:t}=e,[a,n]=(0,o.useState)(""),[i,c]=(0,o.useState)(!1),[r,d]=(0,o.useState)(!1),[h,u]=(0,o.useState)(!0),[m,p]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{let e=window.location.hostname,t="localhost",a="a.localhost,b.localhost".split(",")||[];if(e===t||a.includes(e)||"localhost"===e||"127.0.0.1"===e){if(console.log("hostname",e),console.log("main domain",t),console.log("tenanet subdomains",a),e===t||"localhost"===e||"127.0.0.1"===e)d(!0),c(!1),n("");else{let a=e.replace(".".concat(t),"").split(".")[0];c(!0),n(a),d(!1)}u(!0)}else u(!1);p(!0)},[]),m)?h?(0,l.jsx)(s.Provider,{value:{subdomain:a,isTenant:i,isMainDomain:r,isAllowed:h,checked:m},children:t}):(0,l.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"#f8d7da"},children:(0,l.jsxs)("div",{style:{padding:32,borderRadius:12,background:"#fff0f1",color:"#721c24",maxWidth:400,textAlign:"center",boxShadow:"0 4px 24px 0 #b71c1c10"},children:[(0,l.jsx)("h2",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:16},children:"\uD83D\uDEAB Not a registered tenant"}),(0,l.jsxs)("p",{children:["This domain (",(0,l.jsx)("b",{children:window.location.hostname}),") is not allowed to access this app."]}),(0,l.jsxs)("p",{style:{marginTop:20},children:["Please use the main site:\xa0",(0,l.jsx)("a",{href:"https://".concat("localhost"),style:{color:"#0056b3",textDecoration:"underline"},children:"localhost"})]})]})}):(0,l.jsx)("div",{children:"Loading..."})}},4053:(e,t,a)=>{Promise.resolve().then(a.bind(a,9564)),Promise.resolve().then(a.bind(a,2865)),Promise.resolve().then(a.t.bind(a,2353,23)),Promise.resolve().then(a.t.bind(a,7275,23)),Promise.resolve().then(a.t.bind(a,9324,23))},7275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},9324:()=>{},9564:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>c,A:()=>r});var l=a(5155),o=a(2115);let s=a(3464).A.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});s.interceptors.request.use(e=>{let t=function(){let e=window.location.hostname,t="localhost";return e===t?"":("a.localhost,b.localhost".split(",")||[]).includes(e)?e.replace(".".concat(t),"").split(".")[0]:""}();return t&&e.url&&!e.url.startsWith("/".concat(t,"/"))&&(e.url="/".concat(t).concat(e.url)),e});var n=a(5695);let i=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,o.useState)(null),[r,d]=(0,o.useState)(!0),h=(0,n.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=await s.get("/api/me");c(e.data)}catch(e){c(null)}finally{d(!1)}})()},[]);let u=async(e,t)=>{d(!0);try{let a;await s.get("/sanctum/csrf-cookie"),await s.post("/api/login",{email:e,password:t});let l=await s.get("/api/me");c(l.data),h.replace("/")}catch(e){throw e}finally{d(!1)}},m=async()=>{try{await s.post("/api/logout")}catch(e){}localStorage.removeItem("token"),c(null),h.replace("/login")};return(0,l.jsx)(i.Provider,{value:{user:a,loading:r,login:u,logout:m},children:t})}function r(){let e=(0,o.useContext)(i);if(!e)throw Error("useAuth must be inside AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[519,794,441,684,358],()=>t(4053)),_N_E=e.O()}]);