(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1280:(e,t,a)=>{Promise.resolve().then(a.bind(a,4243))},4243:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var l=a(5155),n=a(2115),o=a(9564);function r(){let[e,t]=(0,n.useState)(""),[a,r]=(0,n.useState)(""),[s,u]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),{login:d}=(0,o.A)(),p=async t=>{t.preventDefault(),c(!0),u(null);try{await d(e,a)}catch(e){var l,n;u((null==e||null==(n=e.response)||null==(l=n.data)?void 0:l.message)||"Invalid credentials")}finally{c(!1)}};return(0,l.jsxs)("form",{onSubmit:p,className:"max-w-md w-full mx-auto mt-20 p-8 rounded-2xl shadow-xl bg-white space-y-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-4 text-center text-blue-700",children:"Sign In"}),s&&(0,l.jsx)("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded",children:s}),(0,l.jsx)("input",{className:"w-full border p-3 rounded-lg focus:outline-none",placeholder:"Email",type:"email",autoComplete:"username",value:e,onChange:e=>t(e.target.value),required:!0}),(0,l.jsx)("input",{className:"w-full border p-3 rounded-lg focus:outline-none",placeholder:"Password",type:"password",autoComplete:"current-password",value:a,onChange:e=>r(e.target.value),required:!0}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-700 text-white py-3 rounded-lg font-semibold hover:bg-blue-800 transition disabled:opacity-60",disabled:i,children:i?"Logging in...":"Login"})]})}},9564:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>u,A:()=>i});var l=a(5155),n=a(2115);let o=a(3464).A.create({baseURL:"https://back.roshandevkota.com.np",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});o.interceptors.request.use(e=>{let t=function(){let e=window.location.hostname,t="office.roshandevkota.com.np";return e===t?"":("a.roshandevkota.com.np,b.roshandevkota.com.np".split(",")||[]).includes(e)?e.replace(".".concat(t),"").split(".")[0]:""}();return t&&e.url&&!e.url.startsWith("/".concat(t,"/"))&&(e.url="/".concat(t).concat(e.url)),e});var r=a(5695);let s=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,n.useState)(null),[i,c]=(0,n.useState)(!0),d=(0,r.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=await o.get("/api/me");u(e.data)}catch(e){u(null)}finally{c(!1)}})()},[]);let p=async(e,t)=>{c(!0);try{let a;await o.get("/sanctum/csrf-cookie"),await o.post("/api/login",{email:e,password:t});let l=await o.get("/api/me");u(l.data),d.replace("/")}catch(e){throw e}finally{c(!1)}},h=async()=>{try{await o.post("/api/logout")}catch(e){}localStorage.removeItem("token"),u(null),d.replace("/login")};return(0,l.jsx)(s.Provider,{value:{user:a,loading:i,login:p,logout:h},children:t})}function i(){let e=(0,n.useContext)(s);if(!e)throw Error("useAuth must be inside AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(1280)),_N_E=e.O()}]);