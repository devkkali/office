(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{220:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))},1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(5155),l=a(9564),o=a(2115),s=a(5695);function r(){let{user:e,loading:t}=(0,l.A)(),a=(0,s.useRouter)();return((0,o.useEffect)(()=>{t||e||a.replace("/login")},[e,t,a]),t||!e)?(0,n.jsx)("div",{className:"p-10 text-center",children:"Loading..."}):"admin"===e.role?(0,n.jsxs)("div",{className:"max-w-3xl mx-auto my-16 p-8 rounded-2xl bg-white shadow-xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4 text-blue-800",children:"Admin Dashboard"}),(0,n.jsxs)("p",{children:["Welcome, ",e.name,"!"]})]}):(0,n.jsxs)("div",{className:"max-w-3xl mx-auto my-16 p-8 rounded-2xl bg-white shadow-xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4 text-green-700",children:"User Dashboard"}),(0,n.jsxs)("p",{children:["Welcome, ",e.name,"!"]})]})}},9564:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>i,A:()=>u});var n,l=a(5155),o=a(2115);let s=a(3464).A.create({baseURL:"https://back.roshandevkota.com.np",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":null==(n=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN=")))?void 0:n.split("=")[1]},withCredentials:!0});s.interceptors.request.use(e=>{let t=function(){let e=window.location.hostname,t="office.roshandevkota.com.np";return e===t?"":("a.roshandevkota.com.np,b.roshandevkota.com.np".split(",")||[]).includes(e)?e.replace(".".concat(t),"").split(".")[0]:""}();return t&&e.url&&!e.url.startsWith("/".concat(t,"/"))&&(e.url="/".concat(t).concat(e.url)),e});var r=a(5695);let c=(0,o.createContext)(void 0);function i(e){let{children:t}=e,[a,n]=(0,o.useState)(null),[i,u]=(0,o.useState)(!0),d=(0,r.useRouter)(),h=(0,r.usePathname)();(0,o.useEffect)(()=>{if(h){if("/login"===h)return void u(!1);(async()=>{try{let e=await s.get("/api/me");n(e.data)}catch(e){n(null)}finally{u(!1)}})()}},[h]);let m=async(e,t)=>{u(!0);try{let a;await s.get("/sanctum/csrf-cookie"),await s.post("/login",{email:e,password:t});let l=await s.get("/me");n(l.data),d.replace("/")}catch(e){throw e}finally{u(!1)}},p=async()=>{try{await s.post("/logout")}catch(e){}localStorage.removeItem("token"),n(null),d.replace("/login")};return(0,l.jsx)(c.Provider,{value:{user:a,loading:i,login:m,logout:p},children:t})}function u(){let e=(0,o.useContext)(c);if(!e)throw Error("useAuth must be inside AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(220)),_N_E=e.O()}]);