(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{5188:(t,e,a)=>{Promise.resolve().then(a.bind(a,7657))},7657:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var n=a(5155),r=a(9564),o=a(2115),l=a(5695);function c(){let{user:t}=(0,r.A)();if(!t)return null;t.role}function i(){let{user:t,loading:e}=(0,r.A)(),a=(0,l.useRouter)();return((0,o.useEffect)(()=>{e||t||a.replace("/login")},[t,e,a]),e||!t)?(0,n.jsx)("div",{className:"p-10 text-center",children:"Loading..."}):(0,n.jsx)(c,{})}},9564:(t,e,a)=>{"use strict";a.d(e,{AuthProvider:()=>s,A:()=>u});var n,r=a(5155),o=a(2115);let l=a(3464).A.create({baseURL:"https://back.roshandevkota.com.np",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":null==(n=document.cookie.split("; ").find(t=>t.startsWith("XSRF-TOKEN=")))?void 0:n.split("=")[1]},withCredentials:!0});l.interceptors.request.use(t=>{let e=function(){let t=window.location.hostname,e="office.roshandevkota.com.np";return t===e?"":("a.roshandevkota.com.np,b.roshandevkota.com.np".split(",")||[]).includes(t)?t.replace(".".concat(e),"").split(".")[0]:""}();return e&&t.url&&!t.url.startsWith("/".concat(e,"/"))&&(t.url="/".concat(e).concat(t.url)),t});var c=a(5695);let i=(0,o.createContext)(void 0);function s(t){let{children:e}=t,[a,n]=(0,o.useState)(null),[s,u]=(0,o.useState)(!0),d=(0,c.useRouter)(),p=(0,c.usePathname)();(0,o.useEffect)(()=>{if(p){if("/login"===p)return void u(!1);(async()=>{try{let t=await l.get("/api/me");n(t.data)}catch(t){n(null)}finally{u(!1)}})()}},[p]);let h=async(t,e)=>{u(!0);try{let a;await l.get("/sanctum/csrf-cookie"),await l.post("/login",{email:t,password:e});let r=await l.get("/me");n(r.data),d.replace("/")}catch(t){throw t}finally{u(!1)}},f=async()=>{try{await l.post("/logout")}catch(t){}localStorage.removeItem("token"),n(null),d.replace("/login")};return(0,r.jsx)(i.Provider,{value:{user:a,loading:s,login:h,logout:f},children:e})}function u(){let t=(0,o.useContext)(i);if(!t)throw Error("useAuth must be inside AuthProvider");return t}}},t=>{var e=e=>t(t.s=e);t.O(0,[794,441,684,358],()=>e(5188)),_N_E=t.O()}]);