(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{5188:(e,t,a)=>{Promise.resolve().then(a.bind(a,7657))},7657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(5155),r=a(9564),o=a(2115),c=a(5695);function l(){let{user:e}=(0,r.A)();if(!e)return null;e.role}function s(){let{user:e,loading:t}=(0,r.A)(),a=(0,c.useRouter)();return((0,o.useEffect)(()=>{t||e||a.replace("/login")},[e,t,a]),t||!e)?(0,n.jsx)("div",{className:"p-10 text-center",children:"Loading..."}):(0,n.jsx)(l,{})}},9564:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>s,A:()=>i});var n=a(5155),r=a(2115);let o=a(3464).A.create({baseURL:"https://back.roshandevkota.com.np",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});o.interceptors.request.use(e=>{let t=function(){let e=window.location.hostname,t="office.roshandevkota.com.np";return e===t?"":("a.roshandevkota.com.np,b.roshandevkota.com.np".split(",")||[]).includes(e)?e.replace(".".concat(t),"").split(".")[0]:""}();return t&&e.url&&!e.url.startsWith("/".concat(t,"/"))&&(e.url="/".concat(t).concat(e.url)),e});var c=a(5695);let l=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[a,s]=(0,r.useState)(null),[i,u]=(0,r.useState)(!0),p=(0,c.useRouter)(),d=(0,c.usePathname)();(0,r.useEffect)(()=>{if(d){if("/login"===d)return void u(!1);(async()=>{try{let e=await o.get("/api/me");s(e.data)}catch(e){s(null)}finally{u(!1)}})()}},[d]);let h=async(e,t)=>{u(!0);try{let a;await o.get("/sanctum/csrf-cookie"),await o.post("/login",{email:e,password:t});let n=await o.get("/me");s(n.data),p.replace("/")}catch(e){throw e}finally{u(!1)}},f=async()=>{try{await o.post("/logout")}catch(e){}localStorage.removeItem("token"),s(null),p.replace("/login")};return(0,n.jsx)(l.Provider,{value:{user:a,loading:i,login:h,logout:f},children:t})}function i(){let e=(0,r.useContext)(l);if(!e)throw Error("useAuth must be inside AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(5188)),_N_E=e.O()}]);