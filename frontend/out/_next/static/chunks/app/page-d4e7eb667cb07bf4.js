(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{220:(e,t,o)=>{Promise.resolve().then(o.bind(o,1057))},1057:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(5155),a=o(5731),r=o(2115),c=o(5695);function l(){let{user:e,loading:t}=(0,a.A)(),o=(0,c.useRouter)();return(0,r.useEffect)(()=>{t||(e?o.replace("/dashboard"):o.replace("/login"))},[e,t,o]),(0,n.jsx)("div",{className:"p-10 text-center",children:"Loading..."})}},4871:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});let n=o(3464).A.create({baseURL:"https://back.roshandevkota.com.np",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});n.interceptors.request.use(e=>{let t=function(){let e=window.location.hostname,t="office.roshandevkota.com.np";return e===t?"":("a.roshandevkota.com.np,b.roshandevkota.com.np".split(",")||[]).includes(e)?e.replace(".".concat(t),"").split(".")[0]:""}();t&&e.url&&!e.url.startsWith("/".concat(t,"/"))&&(e.url="/".concat(t).concat(e.url.startsWith("/")?"":"/").concat(e.url));{let t=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():null}("XSRF-TOKEN");console.log("XSRF-TOKEN from cookie:",t),t&&(console.log("Using XSRF-TOKEN from cookie:",t),e.headers["X-XSRF-TOKEN"]=decodeURIComponent(t))}return e});let a=n},5731:(e,t,o)=>{"use strict";o.d(t,{A:()=>i,AuthProvider:()=>s});var n=o(5155),a=o(2115),r=o(4871),c=o(5695);let l=(0,a.createContext)(void 0);function s(e){let{children:t}=e,[o,s]=(0,a.useState)(null),[i,u]=(0,a.useState)(!0),d=(0,c.useRouter)(),p=(0,c.usePathname)();(0,a.useEffect)(()=>{if(p){if("/login"===p)return void u(!1);(async()=>{try{let e=await r.A.get("/me");s(e.data)}catch(e){s(null)}finally{u(!1)}})()}},[p]);let h=async(e,t)=>{u(!0);try{let o;await r.A.get("/sanctum/csrf-cookie"),await r.A.post("/login",{email:e,password:t});let n=await r.A.get("/me");s(n.data),d.replace("/")}catch(e){throw s(null),e}finally{u(!1)}},f=async()=>{try{await r.A.post("/logout")}catch(e){}localStorage.removeItem("token"),s(null),d.replace("/login")};return(0,n.jsx)(l.Provider,{value:{user:o,loading:i,login:h,logout:f},children:t})}function i(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be inside AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,441,684,358],()=>t(220)),_N_E=e.O()}]);